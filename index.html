<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>üß≥ Japan 2025 Travel Tasks</title>
<link href="/SP-2025-tasks/assets/manifest.json" rel="manifest"/>
<link href="/SP-2025-tasks/assets/icons/icon-192x192.png" rel="icon" type="image/png"/>
<link href="/SP-2025-tasks/assets/icons/icon-192x192.png" rel="apple-touch-icon"/>
<style>
  body {
    font-family: sans-serif;
    background: #f5f5f5;
    padding: 1em;
  }
  h1 {
    text-align: center;
  }
  details {
    margin-bottom: 1.5em;
    background: white;
    border-radius: 8px;
    padding: 1em;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  summary {
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1em;
    background: white;
    border-radius: 8px;
    overflow: hidden;
    table-layout: fixed;
  }
  th, td {
    padding: 0.7em;
    text-align: left;
    border-bottom: 1px solid #ccc;
    word-wrap: break-word;
  }
  th:nth-child(1), td:nth-child(1) { width: 15%; }
  th:nth-child(2), td:nth-child(2) { width: 35%; }
  th:nth-child(3), td:nth-child(3) { width: 10%; }
  th:nth-child(4), td:nth-child(4) { width: 25%; }
  th:nth-child(5), td:nth-child(5) { width: 15%; }
  th { background: #eaeaea; }
  a {
    color: #DC143C;
    font-weight: bold;
    text-decoration: underline;
  }
  @media (max-width: 600px) {
    table, thead, tbody, th, td, tr {
      display: block;
    }
    th {
      position: absolute;
      top: -9999px;
      left: -9999px;
    }
    td {
      padding-left: 1em;
      border: none;
      border-bottom: 1px solid #ccc;
    }
    td::before {
      content: attr(data-label);
      font-weight: bold;
      display: block;
      margin-bottom: 2px;
      opacity: 0.7;
    }
  }
</style>
</head>
<body>
<h1>üß≥ Japan 2025 Travel Tasks</h1>

<details>
  <summary>‚úàÔ∏è Prior to Departure</summary>
  <table>
    <thead>
      <tr><th>Item</th><th>Description</th><th>Price</th><th>Task</th><th>URL</th></tr>
    </thead>
    <tbody>
      <tr><td data-label="Item">Google Translate</td><td data-label="Description">Translation app with offline mode.</td><td data-label="Price">Free</td><td data-label="Task">Download app & language pack.</td><td data-label="URL"><a href="https://play.google.com/store/apps/details?id=com.google.android.apps.translate">Link</a></td></tr>
      <tr><td data-label="Item">Visit Japan Web</td><td data-label="Description">Mobile site for customs & immigration QR code.</td><td data-label="Price">Free</td><td data-label="Task">Register before departure.</td><td data-label="URL"><a href="https://www.vjw.digital.go.jp/main/#/vjwplo001">Link</a></td></tr>
    </tbody>
  </table>
</details>

<details>
  <summary>üõ¨ On Arrival</summary>
  <table>
    <thead>
      <tr><th>Item</th><th>Description</th><th>Price</th><th>Task</th><th>URL</th></tr>
    </thead>
    <tbody>
      <tr><td data-label="Item">ICOCA Card</td><td data-label="Description">Rechargeable transport smart card.</td><td data-label="Price">¬•1500</td><td data-label="Task">Purchase at KIX Airport.</td><td data-label="URL"><a href="https://www.klook.com/en-AU/activity/1754-icoca-ic-card-osaka/">Link</a></td></tr>
    </tbody>
  </table>
</details>

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', async () => {
      try {
        const reg = await navigator.serviceWorker.register('/SP-2025-tasks/service-worker.js');
        reg.update();
        setInterval(() => reg.update(), 30 * 60 * 1000);
        navigator.serviceWorker.addEventListener('message', (event) => {
          if (event.data && event.data.type === 'NEW_VERSION_ACTIVATED') {
            location.reload();
          }
        });
      } catch (e) { console.error('SW registration failed:', e); }
    });
  }

  document.addEventListener('click', (e) => {
    const a = e.target.closest('a[href]');
    if (!a) return;
    const url = new URL(a.href, location.href);
    const sameOrigin = url.origin === location.origin && url.pathname.startsWith('/SP-2025-tasks/');
    if (!sameOrigin && !navigator.onLine) {
      e.preventDefault();
      alert('You are offline. This link needs an internet connection.');
    }
  });
</script>
</body>
</html>
